; MASM Example - Local time

; includes
include \masm32\include\masm32rt.inc

.386
.model flat, stdcall
option casemap :none   ; case sensitive

include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib

.data
    time SYSTEMTIME <>  ; Declare a SYSTEMTIME structure to store the local time
    buffer db 256 dup(0)  ; Declare a buffer to store the time as a string

.code
start:
    ; Get the local time
    invoke GetLocalTime, addr time

    ; Access the wHour, wMinute, and wSecond fields of the SYSTEMTIME structure
    movzx eax, time.wHour
    movzx ebx, time.wMinute
    movzx ecx, time.wSecond

    ; Format the time into a string
    invoke wsprintf, addr buffer, chr$("The current local time is: %d:%d:%d"), eax, ebx, ecx

    ; Print the time string to the console
    invoke StdOut, addr buffer

    ; Terminate the process
    invoke ExitProcess, 0
end start
