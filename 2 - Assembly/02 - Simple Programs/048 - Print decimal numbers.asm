; MASM Example - Print decimal numbers

; includes
include \masm32\include\masm32rt.inc

.386
.model flat, stdcall
option casemap :none   ; case sensitive

include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib

.data
    buffer db 11 dup(0)  ; Declare a buffer of size 11
    newline db 13, 10, 0  ; Declare newline string

.code
start:
    mov eax, 42     ; Move the value 42 into EAX register

    ; Now, let's convert the number in EAX register to a string representation of the decimal number.
    ; The 'dwtoa' function provided by the MASM32 library helps us do exactly that.
    ; The 'dwtoa' function takes a DWORD value as the first parameter and a pointer to a buffer where the string will be stored as the second parameter.
    invoke dwtoa, eax, addr buffer

    ; Now that we have our string representation of the decimal number in the buffer, we can print it out to the console.
    ; The 'StdOut' function provided by the MASM32 library helps us print the string to the console.
    ; The 'StdOut' function takes a pointer to a null-terminated string as the parameter.
    invoke StdOut, addr buffer
    invoke StdOut, addr newline

    ; Terminate the process
    invoke ExitProcess, 0
end start
