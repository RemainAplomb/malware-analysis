; MASM Example - Delete Files

; includes
include \masm32\include\masm32rt.inc

.386
.model flat, stdcall
option casemap :none   ; case sensitive

include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
includelib \masm32\lib\kernel32.lib

.data
    fileName db "testfile.txt", 0  ; File to be deleted
    errorTitle db "Error", 0
    errorMessage db "File does not exist!", 0

.code
start:
    ; Delete the file
    invoke DeleteFile, addr fileName

    ; Check if the file was successfully deleted
    cmp eax, 0
    je deletionFailed
    jmp endProgram

deletionFailed:
    ; If the deletion failed, we can retrieve the error code using GetLastError
    invoke GetLastError
    cmp eax, ERROR_FILE_NOT_FOUND
    je fileNotFound

    jmp endProgram

fileNotFound:
    ; Display a message box with an error message
    invoke MessageBox, NULL, addr errorMessage, addr errorTitle, MB_OK
    
endProgram:
    ; Terminate the process
    invoke ExitProcess, 0
end start
