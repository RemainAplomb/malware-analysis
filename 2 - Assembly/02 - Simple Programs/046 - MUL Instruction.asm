; MASM Example - Mul Instruction

; includes
include \masm32\include\masm32rt.inc

.386
.model flat, stdcall
option casemap :none   ; case sensitive

include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib

.data
    buffer db 11 dup(0)  ; Declare a buffer of size 11
    newline db 13, 10, 0  ; Declare newline string

.code
start:
    mov eax, 6       ; Move the value 6 into EAX register
    mov ecx, 7       ; Move the value 7 into ECX register

    ; The MUL instruction performs unsigned multiplication of two operands.
    ; Here, it multiplies the content of EAX register with ECX register.
    ; The result is stored in EDX:EAX. If the upper half (EDX) is zero after the operation,
    ; then the OF and CF flags are cleared. If the upper half is not zero after the operation,
    ; then the OF and CF flags are set.
    mul ecx          ; EAX = EAX * ECX

    ; Now, EAX contains the result of 6*7 = 42
    invoke dwtoa, eax, addr buffer
    invoke StdOut, addr buffer
    invoke StdOut, addr newline

    invoke ExitProcess, 0
end start
