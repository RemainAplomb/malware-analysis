; MASM Example - SHL (Shift Left) and SHR (Shift Right) Instructions

; includes
include \masm32\include\masm32rt.inc

.386
.model flat, stdcall
option casemap :none   ; case sensitive

include \masm32\include\masm32.inc
include \masm32\include\kernel32.inc
includelib \masm32\lib\masm32.lib
includelib \masm32\lib\kernel32.lib

.data
    current_value db ?
    buffer db 11 dup(0)  ; Declare a buffer of size 11
    newline db 13, 10, 0  ; Declare newline string

.code
start:
    mov eax, 2       ; Start with the value 2

    ; Perform a shift left operation. This is equivalent to multiplying by 2
    shl eax, 1       ; eax now contains 4
    mov current_value, al ; Copy the low 8 bits of EAX to current_value
    invoke dwtoa, eax, addr buffer
    invoke StdOut, addr buffer
    invoke StdOut, addr newline

    ; Perform a shift right operation. This is equivalent to dividing by 2
    movzx eax, current_value ; Load the value of current_value into EAX and zero-extend it
    shr eax, 1       ; eax now contains 2
    invoke dwtoa, eax, addr buffer
    invoke StdOut, addr buffer
    invoke StdOut, addr newline

    ; Terminate the process
    invoke ExitProcess, 0
end start


