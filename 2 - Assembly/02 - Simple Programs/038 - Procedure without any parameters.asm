; includes
include \masm32\include\masm32rt.inc

; MASM Example - Simple Procedure

.386
.model flat, stdcall
option casemap :none

include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
includelib \masm32\lib\kernel32.lib

.code

; Here we define our simple procedure
; It prints "Hello, World!" to the console
HelloWorld PROC
    ; We first load the address of the string into the ESI register
    lea esi, HelloString

    ; Then we call WriteString to print the string
    call WriteString

    ret
HelloWorld ENDP

; This procedure prints a null-terminated string pointed to by ESI
WriteString PROC
    .repeat
        ; We load a character from the string into AL
        lodsb

        ; If AL is 0, it means we've reached the end of the string
        test al, al
        .until zero?

        ; We print the character in AL
        mov ah, 0Eh
        int 10h

        jmp WriteString
WriteString ENDP

.data
HelloString db "Hello, World!", 0

.code

main PROC
    ; We call our HelloWorld procedure
    call HelloWorld

    ; Then we terminate the program
    push 0
    call ExitProcess
main ENDP

end main
