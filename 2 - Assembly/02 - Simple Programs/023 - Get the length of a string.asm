; includes
include \masm32\include\masm32rt.inc

; MASM String Length Calculation Example

.386            ; 386 processor instructions
.model flat, stdcall ; Memory model & calling convention
option casemap :none ; Case sensitive

include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib

.data           ; Begin the data segment where variables are defined
    myString db 'Hello, World!', 0 ; Null-terminated string to get the length of
    lengthString db 64 dup(0) ; String to store the length in for printing

.code           ; Begin the code segment where our code is placed

start:          ; Entry point of the program

    ; Get the length of the string
    lea eax, myString ; Load the address of the string into eax
    call strlen ; Call the strlen function from the masm32 library

    ; Now eax contains the length of the string

    ; Convert the length to a string for printing
    mov edi, eax ; Move the length into edi
    lea eax, lengthString ; Load the address of lengthString into eax
    call dwtoa ; Call the dwtoa function from the masm32 library to convert the length to a string

    ; Now eax points to the string representation of the length

    ; Print the length
    invoke StdOut, eax ; Call the StdOut function from the masm32 library to print the string

    ; End the program
    invoke ExitProcess, 0 ; Call the ExitProcess function from the Windows API to end the program

end start       ; End of the program
