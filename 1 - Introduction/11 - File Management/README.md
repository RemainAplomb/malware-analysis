# File Management

## Overview

Files are an integral part of any operating system. In Linux, files are managed through system calls. In Assembly, we can use these system calls directly to perform various operations on files.

## Opening Files

In Linux, the open system call is used to open a file. The system call number is 5. Here is a simple example of opening a file in Assembly:

```
section .data
file db 'test.txt', 0 ; Null-terminated string

section .text
global _start

_start:
    mov eax, 5   ; System call number (sys_open)
    mov ebx, file ; Pointer to the file name
    mov ecx, 0   ; File flags (0 = O_RDONLY)
    int 0x80     ; Call kernel
```

If the system call is successful, the return value (in eax) is a file descriptor that you can use in subsequent system calls.

## Reading Files

Once a file is open, you can read from it using the read system call. The system call number is 3.

```
section .data
buf times 100 db 0 ; Buffer to store the read data

section .text
global _start

_start:
    ; open the file (see previous section)...
    mov ebx, eax ; File descriptor
    mov eax, 3   ; System call number (sys_read)
    mov ecx, buf ; Pointer to the buffer
    mov edx, 100 ; Number of bytes to read
    int 0x80     ; Call kernel
```

The number of bytes actually read is returned in eax.

## Writing Files

Writing to a file is similar to reading. You use the write system call, which has the system call number 4.

```
section .data
msg db 'Hello, World!', 0

section .text
global _start

_start:
    ; open the file (see opening files section)...
    mov ebx, eax ; File descriptor
    mov eax, 4   ; System call number (sys_write)
    mov ecx, msg ; Pointer to the message
    mov edx, 13  ; Message length
    int 0x80     ; Call kernel
```

The number of bytes actually written is returned in eax.

## Closing Files

After you're done with a file, you should close it using the close system call. The system call number is 6.

```
section .text
global _start

_start:
    ; open, read, or write to the file (see previous sections)...
    mov eax, 6   ; System call number (sys_close)
    ; ebx should hold the file descriptor
    int 0x80     ; Call kernel
```

If the system call is successful, eax will contain 0.
