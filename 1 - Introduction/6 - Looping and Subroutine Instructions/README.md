# Looping Instructions

## Overview

Looping instructions are used to repeat a block of code based on specific conditions. They allow for iterative execution, enabling the program to perform tasks repetitively until certain conditions are met or a specified number of iterations is reached.

Looping instructions and subroutine instructions are fundamental in controlling program flow and facilitating code organization and reuse. Understanding and utilizing these instructions effectively is essential in programming and analyzing control flow in malware analysis.

## Types of Control Instructions

Conditional Loop - A loop that executes based on a specific condition.

Examples:

    - Branch if Zero (BZ)
    - Branch if Not Zero (BNZ)
    - Counted Loop - A loop that executes a fixed
      number of times based on a counter value.

Examples:

    - Loop (LOOP)
    - Loop with Counter (LC)

## Branch if Zero

Branches to the specified label if the value in reg is zero.

Syntax:

```
BZ reg, label
```

Example:

```
BZ R1, loop
; Continue executing code if R1 is zero
```

## Branch if not Zero

Branches to the specified label if the value in reg is not zero.

Syntax:

```
BNZ reg, label
```

Example:

```
BNZ R1, exit
; Continue executing code if R1 is not zero
```

## Counted Loop Instructions

Counted loop instructions execute a fixed number of times based on a counter value. Here are some examples:

### LOOP

Decrements the value in reg by one and jumps to the specified label until the value becomes zero.

Syntax:

```
LOOP reg, label
```

Example:

```
LOOP R2, loop
; Continue looping until R2 becomes zero
```

### Loop with Counter (LC)

Decrements the value in the counter_reg by one and jumps to the specified label until the value becomes zero. The current loop iteration count is stored in the loop_reg.

Syntax:

```
LC counter_reg, loop_reg, label
```

Example:

```
LC R1, R2, loop
; Decrement R1 by 1 and jump to 'loop' until R1 becomes zero
```

# Subroutine Instructions

## Overview

Subroutine instructions allow for the organization and reuse of code by dividing it into smaller logical units called subroutines or functions. These instructions enable the program to call and return from subroutines, allowing for modular programming and code reuse.

## Types of Subroutine Instructions

1. Call - A subroutine call instruction that transfers control to a specific subroutine.

Examples:

    - Call (CALL)
    - Jump and Link (JAL)

2. Return - A return instruction that transfers control back to the calling program from a subroutine.

Examples:

    - Return (RET)

## CALL

Calls the specified subroutine by jumping to the subroutine's label and saving the return address.

Syntax:

```
CALL label
```

Example:

```
CALL subroutine
; Jump to 'subroutine' and save the return address
```

## RET (Return)

Returns from a subroutine to the calling program by jumping to the saved return address.

Syntax:

```
RET
```

Example:

```
RET
; Return to the calling program from a subroutine
```
